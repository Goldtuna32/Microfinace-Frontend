"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[134],{2134:(I,p,a)=>{a.r(p),a.d(p,{TransactionComponent:()=>j});var t=a(4438),d=a(177),o=a(9417),_=a(7965);function f(e,i){if(1&e){const n=t.RV6();t.j41(0,"div",24),t.EFF(1),t.j41(2,"button",25),t.bIt("click",function(){t.eBV(n);const r=t.XpG();return t.Njj(r.successMessage.set(null))}),t.k0s()()}if(2&e){const n=t.XpG();t.R7$(),t.SpI(" ",n.successMessage()," ")}}function v(e,i){if(1&e){const n=t.RV6();t.j41(0,"div",26),t.EFF(1),t.j41(2,"button",25),t.bIt("click",function(){t.eBV(n);const r=t.XpG();return t.Njj(r.error.set(null))}),t.k0s()()}if(2&e){const n=t.XpG();t.R7$(),t.SpI(" ",n.error()," ")}}function F(e,i){if(1&e&&(t.j41(0,"option",27),t.EFF(1),t.k0s()),2&e){const n=i.$implicit;t.Y8G("value",n.id),t.R7$(),t.Lme(" ",n.accountNumber," - ",null==n||null==n.cif?null:n.cif.name," ")}}function g(e,i){1&e&&(t.j41(0,"div",28),t.EFF(1," Please select an account "),t.k0s())}function h(e,i){1&e&&(t.j41(0,"div"),t.EFF(1,"Amount is required"),t.k0s())}function T(e,i){1&e&&(t.j41(0,"div"),t.EFF(1,"Amount must be greater than 0"),t.k0s())}function b(e,i){if(1&e&&(t.j41(0,"div",28),t.DNE(1,h,2,0,"div",29)(2,T,2,0,"div",29),t.k0s()),2&e){let n,s;const r=t.XpG();t.R7$(),t.Y8G("ngIf",null==(n=r.transactionForm.get("amount"))||null==n.errors?null:n.errors.required),t.R7$(),t.Y8G("ngIf",null==(s=r.transactionForm.get("amount"))||null==s.errors?null:s.errors.min)}}function E(e,i){if(1&e&&(t.j41(0,"div",28),t.EFF(1),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.SpI(" ",n.error()," ")}}function k(e,i){1&e&&(t.j41(0,"div",28),t.EFF(1," Please select a transaction type "),t.k0s())}function C(e,i){1&e&&(t.j41(0,"div",28),t.EFF(1," Description is required "),t.k0s())}let j=(()=>{class e{constructor(n){this.fb=n,this.transactionService=(0,t.WQX)(_.k),this.currentAccounts=(0,t.vPA)([]),this.loading=(0,t.vPA)(!1),this.error=(0,t.vPA)(null),this.successMessage=(0,t.vPA)(null),this.backendError=null}ngOnInit(){this.initForm(),this.fetchCurrentAccounts()}initForm(){this.transactionForm=this.fb.group({currentAccountId:["",o.k0.required],amount:["",[o.k0.required,o.k0.min(.01)]],transactionType:["DEBIT",o.k0.required],transactionDescription:["",o.k0.required]})}fetchCurrentAccounts(){this.loading.set(!0),this.error.set(null),this.transactionService.getCurrentAccounts().subscribe({next:n=>{console.log("\u2705 Received accounts:",n),this.currentAccounts.set(n),this.loading.set(!1)},error:n=>{console.error("\u274c Error fetching accounts:",n),this.error.set("Failed to load accounts. Please try again."),this.loading.set(!1)}})}submitTransaction(){this.transactionForm.valid&&(this.loading.set(!0),this.error.set(null),this.successMessage.set(null),this.transactionService.createTransaction(this.transactionForm.value).subscribe({next:s=>{console.log("\u2705 Transaction created successfully:",s),this.successMessage.set("Transaction created successfully!"),this.transactionForm.reset({type:"debit"})},error:s=>{console.error("\u274c Error creating transaction:",s),this.error.set(s.message||"Transaction failed.")}}),this.loading.set(!1))}static{this.\u0275fac=function(s){return new(s||e)(t.rXU(o.ok))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-transaction"]],decls:52,vars:11,consts:[[1,"container","mt-4"],[1,"card","shadow-lg"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"card-body"],[3,"ngSubmit","formGroup"],["class","alert alert-success alert-dismissible fade show mb-3",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show mb-3",4,"ngIf"],[1,"mb-3"],[1,"form-label"],[1,"text-danger"],["formControlName","currentAccountId",1,"form-select"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","text-danger mt-1",4,"ngIf"],["type","number","formControlName","amount","placeholder","Enter amount",1,"form-control"],[1,"d-flex","gap-3"],[1,"form-check"],["type","radio","formControlName","transactionType","value","CREDIT",1,"form-check-input"],[1,"form-check-label"],["type","radio","formControlName","transactionType","value","DEBIT",1,"form-check-input"],["formControlName","transactionDescription","placeholder","Enter description","rows","3",1,"form-control"],[1,"text-end"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"alert","alert-success","alert-dismissible","fade","show","mb-3"],["type","button",1,"btn-close",3,"click"],[1,"alert","alert-danger","alert-dismissible","fade","show","mb-3"],[3,"value"],[1,"text-danger","mt-1"],[4,"ngIf"]],template:function(s,r){if(1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),t.EFF(4,"Create Transaction"),t.k0s()(),t.j41(5,"div",4)(6,"form",5),t.bIt("ngSubmit",function(){return r.submitTransaction()}),t.DNE(7,f,3,1,"div",6)(8,v,3,1,"div",7),t.j41(9,"div",8)(10,"label",9),t.EFF(11,"Select Current Account "),t.j41(12,"span",10),t.EFF(13,"*"),t.k0s()(),t.j41(14,"select",11)(15,"option",12),t.EFF(16,"Select Account"),t.k0s(),t.DNE(17,F,2,3,"option",13),t.k0s(),t.DNE(18,g,2,0,"div",14),t.k0s(),t.j41(19,"div",8)(20,"label",9),t.EFF(21,"Amount "),t.j41(22,"span",10),t.EFF(23,"*"),t.k0s()(),t.nrm(24,"input",15),t.DNE(25,b,3,2,"div",14)(26,E,2,1,"div",14),t.k0s(),t.j41(27,"div",8)(28,"label",9),t.EFF(29,"Transaction Type "),t.j41(30,"span",10),t.EFF(31,"*"),t.k0s()(),t.j41(32,"div",16)(33,"div",17),t.nrm(34,"input",18),t.j41(35,"label",19),t.EFF(36,"Credit"),t.k0s()(),t.j41(37,"div",17),t.nrm(38,"input",20),t.j41(39,"label",19),t.EFF(40,"Debit"),t.k0s()()(),t.DNE(41,k,2,0,"div",14),t.k0s(),t.j41(42,"div",8)(43,"label",9),t.EFF(44,"Description "),t.j41(45,"span",10),t.EFF(46,"*"),t.k0s()(),t.nrm(47,"textarea",21),t.DNE(48,C,2,0,"div",14),t.k0s(),t.j41(49,"div",22)(50,"button",23),t.EFF(51),t.k0s()()()()()()),2&s){let c,l,u,m;t.R7$(6),t.Y8G("formGroup",r.transactionForm),t.R7$(),t.Y8G("ngIf",r.successMessage()),t.R7$(),t.Y8G("ngIf",r.error()),t.R7$(9),t.Y8G("ngForOf",r.currentAccounts()),t.R7$(),t.Y8G("ngIf",(null==(c=r.transactionForm.get("currentAccountId"))?null:c.touched)&&(null==(c=r.transactionForm.get("currentAccountId"))?null:c.invalid)),t.R7$(7),t.Y8G("ngIf",(null==(l=r.transactionForm.get("amount"))?null:l.touched)&&(null==(l=r.transactionForm.get("amount"))?null:l.invalid)),t.R7$(),t.Y8G("ngIf",r.error()),t.R7$(15),t.Y8G("ngIf",(null==(u=r.transactionForm.get("transactionType"))?null:u.touched)&&(null==(u=r.transactionForm.get("transactionType"))?null:u.invalid)),t.R7$(7),t.Y8G("ngIf",(null==(m=r.transactionForm.get("transactionDescription"))?null:m.touched)&&(null==(m=r.transactionForm.get("transactionDescription"))?null:m.invalid)),t.R7$(2),t.Y8G("disabled",r.transactionForm.invalid||r.loading()),t.R7$(),t.SpI(" ",r.loading()?"Processing...":"Submit Transaction"," ")}},dependencies:[d.MD,d.Sq,d.bT,o.YN,o.qT,o.xH,o.y7,o.me,o.Q0,o.wz,o.Fm,o.BC,o.cb,o.X1,o.j4,o.JD],encapsulation:2})}}return e})()}}]);