"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[535],{7535:(U,D,d)=>{d.r(D),d.d(D,{DealerRegistrationComponent:()=>O});var n=d(9417),u=d(177),e=d(4438),y=d(1626);let N=(()=>{class o{constructor(r){this.http=r,this.baseUrl="http://localhost:8080/api/dealer-registration"}getCurrentAccounts(){return this.http.get("http://localhost:8080/api/current-accounts")}createDealer(r){return this.http.post(this.baseUrl,r)}static{this.\u0275fac=function(l){return new(l||o)(e.KVO(y.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();const i=o=>({"is-invalid":o});function E(o,s){1&o&&(e.j41(0,"div",25),e.EFF(1," Company Name is required. "),e.k0s())}function w(o,s){1&o&&(e.j41(0,"div",25),e.EFF(1," Valid Phone Number is required (10-15 digits). "),e.k0s())}function j(o,s){1&o&&(e.j41(0,"div",25),e.EFF(1," Street address is required. "),e.k0s())}function $(o,s){if(1&o&&(e.j41(0,"option",26),e.EFF(1),e.k0s()),2&o){const r=s.$implicit;e.Y8G("value",r),e.R7$(),e.JRh(r)}}function G(o,s){1&o&&(e.j41(0,"div",25),e.EFF(1," Region is required. "),e.k0s())}function Y(o,s){if(1&o&&(e.j41(0,"option",26),e.EFF(1),e.k0s()),2&o){const r=s.$implicit;e.Y8G("value",r),e.R7$(),e.JRh(r)}}function I(o,s){1&o&&(e.j41(0,"div",25),e.EFF(1," District is required. "),e.k0s())}function A(o,s){if(1&o&&(e.j41(0,"option",26),e.EFF(1),e.k0s()),2&o){const r=s.$implicit;e.Y8G("value",r),e.R7$(),e.JRh(r)}}function T(o,s){1&o&&(e.j41(0,"div",25),e.EFF(1," Township is required. "),e.k0s())}function q(o,s){if(1&o&&(e.j41(0,"option",26),e.EFF(1),e.k0s()),2&o){const r=s.$implicit;e.Y8G("value",r.id),e.R7$(),e.JRh(r.accountNumber)}}function S(o,s){1&o&&(e.j41(0,"div",25),e.EFF(1," Current Account is required. "),e.k0s())}let O=(()=>{class o{constructor(r,l,t){this.fb=r,this.http=l,this.dealerService=t,this.regions=[],this.districts=[],this.townships=[],this.locationData={},this.currentAccounts=[],this.dealerForm=this.fb.group({companyName:["",n.k0.required],phoneNumber:["",[n.k0.required,n.k0.pattern(/^\d{10,15}$/)]],status:["1"],currentAccountId:["",n.k0.required],address:this.fb.group({street:["",n.k0.required],region:["",n.k0.required],district:["",n.k0.required],township:["",n.k0.required]})})}ngOnInit(){this.http.get("assets/myanmar-townships.json").subscribe(r=>{this.locationData=r,this.regions=Object.keys(r),console.log("Regions loaded:",this.regions)}),this.loadCurrentAccounts()}loadCurrentAccounts(){this.dealerService.getCurrentAccounts().subscribe(r=>{this.currentAccounts=r,console.log("Current Accounts loaded:",this.currentAccounts)})}onRegionChange(){const r=this.dealerForm.get("address.region")?.value;this.districts=r?Object.keys(this.locationData[r]):[],this.townships=[],this.dealerForm.get("address")?.patchValue({district:"",township:""}),console.log("Selected Region:",r),console.log("Districts:",this.districts)}onDistrictChange(){const r=this.dealerForm.get("address.region")?.value,l=this.dealerForm.get("address.district")?.value;this.townships=r&&l?this.locationData[r][l]:[],this.dealerForm.get("address.township")?.setValue(""),console.log("Selected District:",l),console.log("Townships:",this.townships)}isFormFullyFilled(){return this.dealerForm.valid&&Object.values(this.dealerForm.value).every(r=>"object"==typeof r?r&&Object.values(r).every(l=>""!==l&&null!==l):""!==r&&null!==r)}onSubmit(){if(this.dealerForm.valid){const r={companyName:this.dealerForm.value.companyName,phoneNumber:this.dealerForm.value.phoneNumber,status:parseInt(this.dealerForm.value.status),currentAccountId:parseInt(this.dealerForm.value.currentAccountId),address:{street:this.dealerForm.get("address.street")?.value,region:this.dealerForm.get("address.region")?.value,district:this.dealerForm.get("address.district")?.value,township:this.dealerForm.get("address.township")?.value}};console.log("Submitting Data:",r),this.dealerService.createDealer(r).subscribe({next:l=>{console.log("Dealer Registered:",l),alert("Dealer Registered Successfully"),this.dealerForm.reset()},error:l=>{console.error("Error Registering Dealer:",l),alert(l.error?.message||"Failed to register dealer")}})}}static{this.\u0275fac=function(l){return new(l||o)(e.rXU(n.ok),e.rXU(y.Qq),e.rXU(N))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-dealer-registration"]],decls:57,vars:36,consts:[[1,"container","mx-auto","p-4"],[1,"bg-white","shadow-md","rounded-lg","p-6",3,"ngSubmit","formGroup"],[1,"mb-4"],["for","companyName",1,"block","text-gray-700","font-semibold","mb-2"],["id","companyName","formControlName","companyName","placeholder","Enter company name",1,"form-control","w-full","border","border-gray-300","rounded-md","p-2","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","phoneNumber",1,"block","text-gray-700","font-semibold","mb-2"],["id","phoneNumber","formControlName","phoneNumber","placeholder","Enter phone number (10-15 digits)",1,"form-control","w-full","border","border-gray-300","rounded-md","p-2","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngClass"],["for","status",1,"block","text-gray-700","font-semibold","mb-2"],["id","status","formControlName","status","placeholder","Enter status (e.g., 1 for active)",1,"form-control","w-full","border","border-gray-300","rounded-md","p-2","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["formGroupName","address",1,"mb-4"],["for","street",1,"block","text-gray-700","font-semibold","mb-2"],["id","street","formControlName","street","placeholder","Enter street address",1,"form-control","w-full","border","border-gray-300","rounded-md","p-2","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngClass"],["for","region",1,"block","text-gray-700","font-semibold","mb-2"],["id","region","formControlName","region",1,"form-select","w-full","border","border-gray-300","rounded-md","p-2","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"change","ngClass"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["for","district",1,"block","text-gray-700","font-semibold","mb-2"],["id","district","formControlName","district",1,"form-select","w-full","border","border-gray-300","rounded-md","p-2","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"change","disabled","ngClass"],["for","township",1,"block","text-gray-700","font-semibold","mb-2"],["id","township","formControlName","township",1,"form-select","w-full","border","border-gray-300","rounded-md","p-2","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"disabled","ngClass"],["for","currentAccountId",1,"block","text-gray-700","font-semibold","mb-2"],["id","currentAccountId","formControlName","currentAccountId",1,"form-select","w-full","border","border-gray-300","rounded-md","p-2","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngClass"],[1,"text-center"],["type","submit",1,"btn","btn-primary","w-full","py-2","px-4","bg-blue-600","text-white","rounded-md","hover:bg-blue-700","disabled:bg-gray-400","disabled:cursor-not-allowed",3,"disabled"],[1,"invalid-feedback"],[3,"value"]],template:function(l,t){if(1&l&&(e.j41(0,"div",0)(1,"form",1),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.j41(2,"div",2)(3,"label",3),e.EFF(4,"Company Name"),e.k0s(),e.nrm(5,"input",4),e.DNE(6,E,2,0,"div",5),e.k0s(),e.j41(7,"div",2)(8,"label",6),e.EFF(9,"Phone Number"),e.k0s(),e.nrm(10,"input",7),e.DNE(11,w,2,0,"div",5),e.k0s(),e.j41(12,"div",2)(13,"label",8),e.EFF(14,"Status"),e.k0s(),e.nrm(15,"input",9),e.k0s(),e.j41(16,"div",10)(17,"div",2)(18,"label",11),e.EFF(19,"Street Address"),e.k0s(),e.nrm(20,"input",12),e.DNE(21,j,2,0,"div",5),e.k0s(),e.j41(22,"div",2)(23,"label",13),e.EFF(24,"Region"),e.k0s(),e.j41(25,"select",14),e.bIt("change",function(){return t.onRegionChange()}),e.j41(26,"option",15),e.EFF(27,"Select Region"),e.k0s(),e.DNE(28,$,2,2,"option",16),e.k0s(),e.DNE(29,G,2,0,"div",5),e.k0s(),e.j41(30,"div",2)(31,"label",17),e.EFF(32,"District"),e.k0s(),e.j41(33,"select",18),e.bIt("change",function(){return t.onDistrictChange()}),e.j41(34,"option",15),e.EFF(35,"Select District"),e.k0s(),e.DNE(36,Y,2,2,"option",16),e.k0s(),e.DNE(37,I,2,0,"div",5),e.k0s(),e.j41(38,"div",2)(39,"label",19),e.EFF(40,"Township"),e.k0s(),e.j41(41,"select",20)(42,"option",15),e.EFF(43,"Select Township"),e.k0s(),e.DNE(44,A,2,2,"option",16),e.k0s(),e.DNE(45,T,2,0,"div",5),e.k0s()(),e.j41(46,"div",2)(47,"label",21),e.EFF(48,"Current Account"),e.k0s(),e.j41(49,"select",22)(50,"option",15),e.EFF(51,"Select Current Account"),e.k0s(),e.DNE(52,q,2,2,"option",16),e.k0s(),e.DNE(53,S,2,0,"div",5),e.k0s(),e.j41(54,"div",23)(55,"button",24),e.EFF(56," Register Dealer "),e.k0s()()()()),2&l){let a,c,m,g,p,h,f,b,F,v,k,R,C,_;e.R7$(),e.Y8G("formGroup",t.dealerForm),e.R7$(4),e.Y8G("ngClass",e.eq3(22,i,(null==(a=t.dealerForm.get("companyName"))?null:a.touched)&&(null==(a=t.dealerForm.get("companyName"))?null:a.invalid))),e.R7$(),e.Y8G("ngIf",(null==(c=t.dealerForm.get("companyName"))?null:c.touched)&&(null==(c=t.dealerForm.get("companyName"))?null:c.invalid)),e.R7$(4),e.Y8G("ngClass",e.eq3(24,i,(null==(m=t.dealerForm.get("phoneNumber"))?null:m.touched)&&(null==(m=t.dealerForm.get("phoneNumber"))?null:m.invalid))),e.R7$(),e.Y8G("ngIf",(null==(g=t.dealerForm.get("phoneNumber"))?null:g.touched)&&(null==(g=t.dealerForm.get("phoneNumber"))?null:g.invalid)),e.R7$(9),e.Y8G("ngClass",e.eq3(26,i,(null==(p=t.dealerForm.get("address.street"))?null:p.touched)&&(null==(p=t.dealerForm.get("address.street"))?null:p.invalid))),e.R7$(),e.Y8G("ngIf",(null==(h=t.dealerForm.get("address.street"))?null:h.touched)&&(null==(h=t.dealerForm.get("address.street"))?null:h.invalid)),e.R7$(4),e.Y8G("ngClass",e.eq3(28,i,(null==(f=t.dealerForm.get("address.region"))?null:f.touched)&&(null==(f=t.dealerForm.get("address.region"))?null:f.invalid))),e.R7$(3),e.Y8G("ngForOf",t.regions),e.R7$(),e.Y8G("ngIf",(null==(b=t.dealerForm.get("address.region"))?null:b.touched)&&(null==(b=t.dealerForm.get("address.region"))?null:b.invalid)),e.R7$(4),e.Y8G("disabled",!t.districts.length)("ngClass",e.eq3(30,i,(null==(F=t.dealerForm.get("address.district"))?null:F.touched)&&(null==(F=t.dealerForm.get("address.district"))?null:F.invalid))),e.R7$(3),e.Y8G("ngForOf",t.districts),e.R7$(),e.Y8G("ngIf",(null==(v=t.dealerForm.get("address.district"))?null:v.touched)&&(null==(v=t.dealerForm.get("address.district"))?null:v.invalid)),e.R7$(4),e.Y8G("disabled",!t.townships.length)("ngClass",e.eq3(32,i,(null==(k=t.dealerForm.get("address.township"))?null:k.touched)&&(null==(k=t.dealerForm.get("address.township"))?null:k.invalid))),e.R7$(3),e.Y8G("ngForOf",t.townships),e.R7$(),e.Y8G("ngIf",(null==(R=t.dealerForm.get("address.township"))?null:R.touched)&&(null==(R=t.dealerForm.get("address.township"))?null:R.invalid)),e.R7$(4),e.Y8G("ngClass",e.eq3(34,i,(null==(C=t.dealerForm.get("currentAccountId"))?null:C.touched)&&(null==(C=t.dealerForm.get("currentAccountId"))?null:C.invalid))),e.R7$(3),e.Y8G("ngForOf",t.currentAccounts),e.R7$(),e.Y8G("ngIf",(null==(_=t.dealerForm.get("currentAccountId"))?null:_.touched)&&(null==(_=t.dealerForm.get("currentAccountId"))?null:_.invalid)),e.R7$(2),e.Y8G("disabled",!t.dealerForm.valid)}},dependencies:[u.MD,u.YU,u.Sq,u.bT,n.X1,n.qT,n.xH,n.y7,n.me,n.wz,n.BC,n.cb,n.j4,n.JD,n.$R,n.YN],encapsulation:2})}}return o})()}}]);