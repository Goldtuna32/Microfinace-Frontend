"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[594],{594:(E,p,c)=>{c.r(p),c.d(p,{ProductTypeListComponent:()=>v});var a=c(177),d=c(3430),u=c(2389),l=c(4766),t=c(4438),g=c(5173);const _=(o,n,e)=>({"bg-green-100 text-green-800":o,"bg-red-100 text-red-800":n,"bg-gray-100 text-gray-800":e}),y=(o,n,e)=>({"bi-check-circle":o,"bi-x-circle":n,"bi-question-circle":e});function h(o,n){if(1&o){const e=t.RV6();t.j41(0,"button",32),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,s=t.XpG();return t.Njj(s.openEditModal(i))}),t.nrm(1,"i",33),t.k0s()}}function T(o,n){if(1&o){const e=t.RV6();t.j41(0,"button",34),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,s=t.XpG();return t.Njj(s.deleteProductType(i.id))}),t.nrm(1,"i",35),t.k0s()}}function b(o,n){if(1&o){const e=t.RV6();t.j41(0,"button",36),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,s=t.XpG();return t.Njj(s.restoreProductType(i.id))}),t.nrm(1,"i",37),t.k0s()}}function P(o,n){if(1&o&&(t.j41(0,"tr",25)(1,"td",26),t.EFF(2),t.k0s(),t.j41(3,"td",26)(4,"span",27),t.nrm(5,"i",28),t.EFF(6),t.k0s()(),t.j41(7,"td",26),t.DNE(8,h,2,0,"button",29)(9,T,2,0,"button",30)(10,b,2,0,"button",31),t.k0s()()),2&o){const e=n.$implicit,r=t.XpG();t.R7$(2),t.JRh(e.name),t.R7$(2),t.Y8G("ngClass",t.sMw(7,_,1===e.status,2===e.status||0===e.status,void 0===e.status)),t.R7$(),t.Y8G("ngClass",t.sMw(11,y,1===e.status,2===e.status||0===e.status,void 0===e.status)),t.R7$(),t.SpI(" ",r.getStatusDisplay(e.status)," "),t.R7$(2),t.Y8G("ngIf",!r.isInactiveView),t.R7$(),t.Y8G("ngIf",!r.isInactiveView),t.R7$(),t.Y8G("ngIf",r.isInactiveView)}}function m(o,n){if(1&o){const e=t.RV6();t.j41(0,"app-product-type-edit",38),t.bIt("close",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.closeEditModal())})("save",function(i){t.eBV(e);const s=t.XpG();return t.Njj(s.saveProductType(i))}),t.k0s()}if(2&o){const e=t.XpG();t.Y8G("productType",e.selectedProductType)}}function f(o,n){if(1&o){const e=t.RV6();t.j41(0,"li",19)(1,"a",39),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.goToPage(i))}),t.EFF(2),t.k0s()()}if(2&o){const e=n.$implicit,r=t.XpG();t.AVh("active",r.currentPage===e),t.R7$(),t.AVh("bg-blue-500",r.currentPage===e)("text-white",r.currentPage===e),t.R7$(),t.SpI(" ",e+1," ")}}let v=(()=>{class o{constructor(e){this.productTypeService=e,this.productTypes=[],this.filteredProductTypes=[],this.pageSize=5,this.currentPage=0,this.selectedProductType=null,this.showEditModal=!1,this.editedName="",this.isInactiveView=!1}ngOnInit(){this.loadProductTypes()}loadProductTypes(){this.productTypeService.getAllProductTypes().subscribe({next:e=>{this.productTypes=e,this.updateFilteredProductTypes(),this.paginator&&(this.paginator.length=this.filteredProductTypes.length,this.paginator.pageIndex=this.currentPage,this.paginator.pageSize=this.pageSize)},error:e=>{console.error("Error loading product types",e)}})}updateFilteredProductTypes(e=""){this.filteredProductTypes=this.productTypes.filter(r=>{const i=this.isInactiveView?0===r.status||2===r.status:1===r.status,s=r.name?.toLowerCase().includes(e.toLowerCase())??!0;return i&&s}),this.paginator&&(this.paginator.length=this.filteredProductTypes.length,this.paginator.firstPage())}getPaginatedProductTypes(){const e=this.currentPage*this.pageSize;return this.filteredProductTypes.slice(e,e+this.pageSize)}onPageChange(e){this.currentPage=e.pageIndex,this.pageSize=e.pageSize}applyFilter(e){const r=e.target.value.trim().toLowerCase();this.filteredProductTypes=this.productTypes.filter(i=>i.name?.toLowerCase().includes(r)),this.paginator&&(this.paginator.length=this.filteredProductTypes.length,this.paginator.firstPage())}getStatusDisplay(e){return void 0===e?"Unknown":1===e?"Active":"Inactive"}getTotalPages(){return Math.ceil(this.filteredProductTypes.length/this.pageSize)}toggleView(){this.isInactiveView=!this.isInactiveView,this.updateFilteredProductTypes()}getPageNumbers(){const e=this.getTotalPages();return Array.from({length:e},(r,i)=>i)}goToPage(e){e>=0&&e<this.getTotalPages()&&(this.currentPage=e)}goToPreviousPage(){this.currentPage>0&&this.currentPage--}goToNextPage(){this.currentPage<this.getTotalPages()-1&&this.currentPage++}openEditModal(e){this.selectedProductType=e,this.showEditModal=!0}closeEditModal(){this.showEditModal=!1,this.selectedProductType=null}saveProductType(e){this.productTypeService.updateProductType(e).subscribe({next:r=>{const i=this.productTypes.findIndex(s=>s.id===e.id);-1!==i&&(this.productTypes[i]=r,this.updateFilteredProductTypes()),this.closeEditModal()},error:r=>{console.error("Error updating product type",r)}})}deleteProductType(e){confirm("Are you sure you want to delete this product type?")&&this.productTypeService.deleteProductType(e).subscribe({next:()=>{this.productTypes=this.productTypes.map(r=>r.id===e?{...r,status:0}:r),this.updateFilteredProductTypes(),this.paginator&&(this.paginator.length=this.filteredProductTypes.length)},error:r=>{console.error("Error deleting product type",r),alert("Failed to delete product type")}})}restoreProductType(e){confirm("Are you sure you want to restore this product type?")&&this.productTypeService.restoreProductType(e).subscribe({next:r=>{const i=this.productTypes.findIndex(s=>s.id===e);-1!==i&&(this.productTypes[i]=r,this.updateFilteredProductTypes())},error:r=>{console.error("Error restoring product type",r),alert("Failed to restore product type")}})}static{this.\u0275fac=function(r){return new(r||o)(t.rXU(g.p))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-product-type-list"]],viewQuery:function(r,i){if(1&r&&t.GBs(d.iy,5),2&r){let s;t.mGM(s=t.lsd())&&(i.paginator=s.first)}},decls:41,vars:9,consts:[[1,"container","mt-5","mx-auto","px-4"],[1,"row","justify-content-center"],[1,"col-md-10"],[1,"card","shadow-lg","p-0","bg-white","rounded-lg"],[1,"bg-blue-600","text-white","p-4","flex","justify-between","items-center","rounded-t-lg"],[1,"text-lg","font-semibold"],[1,"text-white","hover:bg-blue-700","px-4","py-2","rounded",3,"click"],[1,"p-4"],[1,"mb-4"],["type","text","placeholder","Filter product types...",1,"form-control","p-2","border","rounded-lg","shadow-sm","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","w-full",3,"keyup"],[1,"table-responsive"],[1,"table","table-striped","table-hover","align-middle"],[1,"bg-gray-800","text-white"],["scope","col",1,"px-4","py-3"],["class","hover:bg-gray-50",4,"ngFor","ngForOf"],[3,"productType","close","save",4,"ngIf"],[1,"mt-4","flex","justify-center"],["aria-label","Page navigation example"],[1,"pagination","flex","items-center","space-x-1"],[1,"page-item"],["href","javascript:void(0)","aria-label","Previous",1,"page-link","px-3","py-2","bg-white","border","border-gray-300","rounded-md","text-gray-700","hover:bg-gray-100","transition-colors","duration-200",3,"click"],["aria-hidden","true"],[1,"sr-only"],["class","page-item",3,"active",4,"ngFor","ngForOf"],["href","javascript:void(0)","aria-label","Next",1,"page-link","px-3","py-2","bg-white","border","border-gray-300","rounded-md","text-gray-700","hover:bg-gray-100","transition-colors","duration-200",3,"click"],[1,"hover:bg-gray-50"],[1,"px-4","py-2"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-sm","font-medium",3,"ngClass"],[1,"bi","me-1",3,"ngClass"],["class","btn btn-primary btn-sm me-2 hover:bg-blue-600 transition-colors duration-200","title","Edit",3,"click",4,"ngIf"],["class","btn btn-danger btn-sm hover:bg-red-700 transition-colors duration-200","title","Delete",3,"click",4,"ngIf"],["class","btn btn-success btn-sm hover:bg-green-700 transition-colors duration-200","title","Restore",3,"click",4,"ngIf"],["title","Edit",1,"btn","btn-primary","btn-sm","me-2","hover:bg-blue-600","transition-colors","duration-200",3,"click"],[1,"bi","bi-pencil-square"],["title","Delete",1,"btn","btn-danger","btn-sm","hover:bg-red-700","transition-colors","duration-200",3,"click"],[1,"bi","bi-trash"],["title","Restore",1,"btn","btn-success","btn-sm","hover:bg-green-700","transition-colors","duration-200",3,"click"],[1,"bi","bi-arrow-counterclockwise"],[3,"close","save","productType"],["href","javascript:void(0)",1,"page-link","px-3","py-2","border","border-gray-300","rounded-md","text-gray-700","hover:bg-gray-100","transition-colors","duration-200",3,"click"]],template:function(r,i){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),t.EFF(6),t.k0s(),t.j41(7,"button",6),t.bIt("click",function(){return i.toggleView()}),t.EFF(8),t.k0s()(),t.j41(9,"div",7)(10,"div",8)(11,"input",9),t.bIt("keyup",function(k){return i.applyFilter(k)}),t.k0s()(),t.j41(12,"div",10)(13,"table",11)(14,"thead",12)(15,"tr")(16,"th",13),t.EFF(17,"Name"),t.k0s(),t.j41(18,"th",13),t.EFF(19,"Status"),t.k0s(),t.j41(20,"th",13),t.EFF(21,"Actions"),t.k0s()()(),t.j41(22,"tbody"),t.DNE(23,P,11,15,"tr",14),t.k0s()()(),t.DNE(24,m,1,1,"app-product-type-edit",15),t.j41(25,"div",16)(26,"nav",17)(27,"ul",18)(28,"li",19)(29,"a",20),t.bIt("click",function(){return i.goToPreviousPage()}),t.j41(30,"span",21),t.EFF(31,"\xab"),t.k0s(),t.j41(32,"span",22),t.EFF(33,"Previous"),t.k0s()()(),t.DNE(34,f,3,7,"li",23),t.j41(35,"li",19)(36,"a",24),t.bIt("click",function(){return i.goToNextPage()}),t.j41(37,"span",21),t.EFF(38,"\xbb"),t.k0s(),t.j41(39,"span",22),t.EFF(40,"Next"),t.k0s()()()()()()()()()()()),2&r&&(t.R7$(6),t.SpI(" ",i.isInactiveView?"Inactive Product Types":"Active Product Types"," "),t.R7$(2),t.SpI(" ",i.isInactiveView?"Show Active Product Types":"Show Inactive Product Types"," "),t.R7$(15),t.Y8G("ngForOf",i.getPaginatedProductTypes()),t.R7$(),t.Y8G("ngIf",i.showEditModal),t.R7$(4),t.AVh("disabled",0===i.currentPage),t.R7$(6),t.Y8G("ngForOf",i.getPageNumbers()),t.R7$(),t.AVh("disabled",i.currentPage===i.getTotalPages()-1))},dependencies:[a.MD,a.YU,a.Sq,a.bT,u.G,l.ProductTypeEditComponent],encapsulation:2})}}return o})()}}]);