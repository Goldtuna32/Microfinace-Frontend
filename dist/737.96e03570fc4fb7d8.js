"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[737],{9737:(B,m,c)=>{c.r(m),c.d(m,{CurrentAccountListComponent:()=>$});var p=c(6543),i=c(9159),u=c(177),d=c(3430),l=c(2042),_=c(9183),C=c(9213),t=c(4438),f=c(2071),h=c(5351);const g=()=>[5,10,20];function A(e,r){1&e&&(t.j41(0,"div",22),t.nrm(1,"mat-spinner",23),t.k0s())}function E(e,r){if(1&e&&(t.j41(0,"div",24),t.EFF(1),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.SpI(" ",n.errorMessage," ")}}function D(e,r){1&e&&(t.j41(0,"th",25),t.EFF(1,"ID"),t.k0s())}function x(e,r){if(1&e&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&e){const n=r.$implicit;t.R7$(),t.JRh(n.id)}}function b(e,r){1&e&&(t.j41(0,"th",25),t.EFF(1,"Account Number"),t.k0s())}function y(e,r){if(1&e&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&e){const n=r.$implicit;t.R7$(),t.JRh(n.accountNumber)}}function L(e,r){1&e&&(t.j41(0,"th",25),t.EFF(1,"Balance"),t.k0s())}function F(e,r){if(1&e&&(t.j41(0,"td",26),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&e){const n=r.$implicit;t.R7$(),t.JRh(t.bMT(2,1,n.balance))}}function R(e,r){1&e&&(t.j41(0,"th",25),t.EFF(1,"Status"),t.k0s())}function v(e,r){if(1&e&&(t.j41(0,"td",26)(1,"span",27),t.EFF(2),t.k0s()()),2&e){const n=r.$implicit;t.R7$(),t.Y8G("ngClass",1===n.status?"bg-green-500":"bg-red-500"),t.R7$(),t.SpI(" ",1===n.status?"Active":"Inactive"," ")}}function T(e,r){1&e&&(t.j41(0,"th",25),t.EFF(1,"Date Created"),t.k0s())}function I(e,r){if(1&e&&(t.j41(0,"td",26),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&e){const n=r.$implicit;t.R7$(),t.JRh(t.i5U(2,1,n.dateCreated,"shortDate"))}}function M(e,r){1&e&&(t.j41(0,"th",25),t.EFF(1,"CIF ID"),t.k0s())}function O(e,r){if(1&e&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&e){const n=r.$implicit;t.R7$(),t.JRh(n.cifId)}}function j(e,r){1&e&&(t.j41(0,"th",28),t.EFF(1,"Actions"),t.k0s())}function w(e,r){if(1&e){const n=t.RV6();t.j41(0,"td",29)(1,"button",30),t.bIt("click",function(){const a=t.eBV(n).$implicit,s=t.XpG();return t.Njj(s.deleteCurrentAccount(a.id))}),t.EFF(2," Delete "),t.k0s()()}}function S(e,r){1&e&&t.nrm(0,"tr",31)}function P(e,r){1&e&&t.nrm(0,"tr",32)}let $=(()=>{class e{constructor(n,o){this.currentAccountService=n,this.dialog=o,this.displayedColumns=["id","accountNumber","balance","status","dateCreated","cifId","actions"],this.dataSource=new i.I6([]),this.loading=!0,this.errorMessage=""}ngOnInit(){this.loadCurrentAccounts()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}loadCurrentAccounts(){this.currentAccountService.getAllCurrentAccounts().subscribe({next:n=>{this.dataSource.data=n,this.loading=!1,this.paginator&&this.sort&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)},error:n=>{this.errorMessage="Failed to load current accounts.",console.error("Error fetching current accounts:",n),this.loading=!1}})}applyFilter(n){this.dataSource.filter=n.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}editCurrentAccount(n){this.dialog.open(p.O,{width:"400px",data:{...n}}).afterClosed().subscribe(a=>{a&&this.loadCurrentAccounts()})}deleteCurrentAccount(n){confirm("Are you sure you want to delete this Current Account?")&&this.currentAccountService.deleteCurrentAccount(n).subscribe({next:()=>{alert("Current Account deleted successfully."),this.loadCurrentAccounts()},error:o=>{alert("Failed to delete Current Account."),console.error("Error deleting Current Account:",o)}})}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(f.A),t.rXU(h.bZ))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-current-account-list"]],viewQuery:function(o,a){if(1&o&&(t.GBs(d.iy,5),t.GBs(l.B4,5)),2&o){let s;t.mGM(s=t.lsd())&&(a.paginator=s.first),t.mGM(s=t.lsd())&&(a.sort=s.first)}},decls:33,vars:7,consts:[[1,"container","mx-auto","mt-6","p-6","bg-white","shadow-lg","rounded-lg"],[1,"text-2xl","font-semibold","text-gray-700","mb-4"],["class","flex justify-center my-6",4,"ngIf"],["class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",4,"ngIf"],[1,"mb-4"],["type","text","placeholder","Search...",1,"w-full","px-4","py-2","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-400",3,"keyup"],[1,"overflow-x-auto"],["mat-table","","matSort","",1,"mat-elevation-z8","w-full","border","border-gray-200","shadow-md",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","","class","py-2 px-4",4,"matHeaderCellDef"],["mat-cell","","class","py-2 px-4",4,"matCellDef"],["matColumnDef","accountNumber"],["matColumnDef","balance"],["matColumnDef","status"],["matColumnDef","dateCreated"],["matColumnDef","cifId"],["matColumnDef","actions"],["mat-header-cell","","class","py-2 px-4 text-center",4,"matHeaderCellDef"],["mat-cell","","class","py-2 px-4 text-center",4,"matCellDef"],["mat-header-row","","class","bg-gray-100",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],[1,"flex","justify-center","my-6"],["color","primary"],[1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","relative"],["mat-header-cell","","mat-sort-header","",1,"py-2","px-4"],["mat-cell","",1,"py-2","px-4"],[1,"px-2","py-1","rounded","text-white",3,"ngClass"],["mat-header-cell","",1,"py-2","px-4","text-center"],["mat-cell","",1,"py-2","px-4","text-center"],[1,"px-4","py-1","bg-red-500","text-white","rounded","hover:bg-red-600",3,"click"],["mat-header-row","",1,"bg-gray-100"],["mat-row",""]],template:function(o,a){1&o&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2,"Current Account List"),t.k0s(),t.DNE(3,A,2,0,"div",2)(4,E,2,1,"div",3),t.j41(5,"div",4)(6,"input",5),t.bIt("keyup",function(k){return a.applyFilter(k)}),t.k0s()(),t.j41(7,"div",6)(8,"table",7),t.qex(9,8),t.DNE(10,D,2,0,"th",9)(11,x,2,1,"td",10),t.bVm(),t.qex(12,11),t.DNE(13,b,2,0,"th",9)(14,y,2,1,"td",10),t.bVm(),t.qex(15,12),t.DNE(16,L,2,0,"th",9)(17,F,3,3,"td",10),t.bVm(),t.qex(18,13),t.DNE(19,R,2,0,"th",9)(20,v,3,2,"td",10),t.bVm(),t.qex(21,14),t.DNE(22,T,2,0,"th",9)(23,I,3,4,"td",10),t.bVm(),t.qex(24,15),t.DNE(25,M,2,0,"th",9)(26,O,2,1,"td",10),t.bVm(),t.qex(27,16),t.DNE(28,j,2,0,"th",17)(29,w,3,0,"td",18),t.bVm(),t.DNE(30,S,1,0,"tr",19)(31,P,1,0,"tr",20),t.k0s()(),t.nrm(32,"mat-paginator",21),t.k0s()),2&o&&(t.R7$(3),t.Y8G("ngIf",a.loading),t.R7$(),t.Y8G("ngIf",a.errorMessage),t.R7$(4),t.Y8G("dataSource",a.dataSource),t.R7$(22),t.Y8G("matHeaderRowDef",a.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",a.displayedColumns),t.R7$(),t.Y8G("pageSizeOptions",t.lJ4(6,g)))},dependencies:[u.MD,u.YU,u.bT,u.oe,u.vh,i.tP,i.Zl,i.tL,i.ji,i.cC,i.YV,i.iL,i.KS,i.$R,i.YZ,i.NB,d.Ou,d.iy,l.NQ,l.B4,l.aE,C.m_,_.D6,_.LG],encapsulation:2})}}return e})()}}]);