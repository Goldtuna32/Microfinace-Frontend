"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[866],{9866:(f,a,u)=>{u.r(a),u.d(a,{HpProductEditComponent:()=>b});var n=u(9417),c=u(177),e=u(4438),m=u(1645),p=u(8498);function g(i,s){if(1&i&&(e.j41(0,"option",33),e.EFF(1),e.k0s()),2&i){const o=s.$implicit;e.Y8G("value",o.id),e.R7$(),e.JRh(o.name)}}function h(i,s){if(1&i&&(e.j41(0,"option",33),e.EFF(1),e.k0s()),2&i){const o=s.$implicit;e.Y8G("value",o.id),e.R7$(),e.JRh(o.companyName)}}let b=(()=>{class i{constructor(o,d,t){this.hpProductService=o,this.route=d,this.router=t,this.hpProduct={name:"",price:0,productTypeId:0,dealerRegistrationId:0,commissionFee:0},this.photoFile=null,this.productId=0,this.currentPhotoUrl="",this.productTypes=[],this.dealerRegistrations=[]}ngOnInit(){this.productId=Number(this.route.snapshot.paramMap.get("id")),this.loadProductData(),this.loadProductTypes(),this.loadDealerRegistrations()}loadProductData(){this.hpProductService.getHpProductById(this.productId).subscribe({next:o=>{this.hpProduct={name:o.name,price:o.price,productTypeId:o.productTypeId,dealerRegistrationId:o.dealerRegistrationId,commissionFee:o.commissionFee},this.currentPhotoUrl=o.hpProductPhoto},error:o=>{console.error("Error loading product:",o),alert("Failed to load product data")}})}loadProductTypes(){this.hpProductService.getProductTypes().subscribe({next:o=>this.productTypes=o,error:o=>console.error("Error loading product types:",o)})}loadDealerRegistrations(){this.hpProductService.getDealerRegistrations().subscribe({next:o=>this.dealerRegistrations=o,error:o=>console.error("Error loading dealer registrations:",o)})}onFileChange(o){const d=o.target;d.files&&d.files.length&&(this.photoFile=d.files[0],this.currentPhotoUrl=URL.createObjectURL(this.photoFile))}onSubmit(){this.hpProductService.updateHpProduct(this.productId,this.hpProduct,this.photoFile).subscribe({next:o=>{console.log("Product updated successfully:",o),this.router.navigate(["/hp-products"])},error:o=>{console.error("Error updating product:",o),alert("Failed to update product")}})}onCancel(){this.router.navigate(["/hp-products"])}static{this.\u0275fac=function(d){return new(d||i)(e.rXU(m.V),e.rXU(p.nX),e.rXU(p.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-hp-product-edit"]],decls:52,vars:8,consts:[[1,"container","mx-auto","p-4","max-w-lg"],[1,"text-2xl","font-bold","text-center","text-gray-800","mb-6"],[1,"bi","bi-pencil-square","me-2"],[1,"bg-white","shadow-md","rounded-lg","p-6",3,"ngSubmit"],[1,"mb-4"],["for","name",1,"form-label","fw-bold","text-gray-700"],[1,"bi","bi-tag","me-1"],["id","name","name","name","placeholder","Enter product name","required","",1,"form-control","w-full","p-2","border","rounded","focus:ring-2","focus:ring-blue-500","focus:outline-none",3,"ngModelChange","ngModel"],["for","price",1,"form-label","fw-bold","text-gray-700"],[1,"bi","bi-currency-dollar","me-1"],["id","price","type","number","name","price","placeholder","Enter price","required","",1,"form-control","w-full","p-2","border","rounded","focus:ring-2","focus:ring-blue-500","focus:outline-none",3,"ngModelChange","ngModel"],["for","productTypeId",1,"form-label","fw-bold","text-gray-700"],[1,"bi","bi-list-ul","me-1"],["id","productTypeId","name","productTypeId","required","",1,"form-select","w-full","p-2","border","rounded","focus:ring-2","focus:ring-blue-500","focus:outline-none",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","dealerRegistrationId",1,"form-label","fw-bold","text-gray-700"],[1,"bi","bi-building","me-1"],["id","dealerRegistrationId","name","dealerRegistrationId","required","",1,"form-select","w-full","p-2","border","rounded","focus:ring-2","focus:ring-blue-500","focus:outline-none",3,"ngModelChange","ngModel"],["for","commissionFee",1,"form-label","fw-bold","text-gray-700"],[1,"bi","bi-percent","me-1"],["id","commissionFee","type","number","name","commissionFee","placeholder","Enter commission fee","required","",1,"form-control","w-full","p-2","border","rounded","focus:ring-2","focus:ring-blue-500","focus:outline-none",3,"ngModelChange","ngModel"],["for","photo",1,"form-label","fw-bold","text-gray-700"],[1,"bi","bi-image","me-1"],[1,"mb-2"],["alt","Current product photo",1,"w-24","h-24","object-cover","rounded-md","border","border-gray-200",3,"error","src"],["id","photo","type","file","accept","image/*",1,"form-control","w-full","p-2","border","rounded","focus:ring-2","focus:ring-blue-500","focus:outline-none",3,"change"],[1,"text-gray-500"],[1,"flex","justify-between"],["type","submit",1,"btn","btn-primary","py-2","px-4","flex","items-center","gap-2","hover:bg-blue-600","transition-colors"],[1,"bi","bi-save"],["type","button",1,"btn","btn-secondary","py-2","px-4","flex","items-center","gap-2","hover:bg-gray-600","transition-colors",3,"click"],[1,"bi","bi-x-circle"],[3,"value"]],template:function(d,t){1&d&&(e.j41(0,"div",0)(1,"h2",1),e.nrm(2,"i",2),e.EFF(3," Edit HP Product "),e.k0s(),e.j41(4,"form",3),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.j41(5,"div",4)(6,"label",5),e.nrm(7,"i",6),e.EFF(8," Name "),e.k0s(),e.j41(9,"input",7),e.mxI("ngModelChange",function(r){return e.DH7(t.hpProduct.name,r)||(t.hpProduct.name=r),r}),e.k0s()(),e.j41(10,"div",4)(11,"label",8),e.nrm(12,"i",9),e.EFF(13," Price "),e.k0s(),e.j41(14,"input",10),e.mxI("ngModelChange",function(r){return e.DH7(t.hpProduct.price,r)||(t.hpProduct.price=r),r}),e.k0s()(),e.j41(15,"div",4)(16,"label",11),e.nrm(17,"i",12),e.EFF(18," Product Type "),e.k0s(),e.j41(19,"select",13),e.mxI("ngModelChange",function(r){return e.DH7(t.hpProduct.productTypeId,r)||(t.hpProduct.productTypeId=r),r}),e.j41(20,"option",14),e.EFF(21,"Select a product type"),e.k0s(),e.DNE(22,g,2,2,"option",15),e.k0s()(),e.j41(23,"div",4)(24,"label",16),e.nrm(25,"i",17),e.EFF(26," Dealer Registration "),e.k0s(),e.j41(27,"select",18),e.mxI("ngModelChange",function(r){return e.DH7(t.hpProduct.dealerRegistrationId,r)||(t.hpProduct.dealerRegistrationId=r),r}),e.j41(28,"option",14),e.EFF(29,"Select a dealer"),e.k0s(),e.DNE(30,h,2,2,"option",15),e.k0s()(),e.j41(31,"div",4)(32,"label",19),e.nrm(33,"i",20),e.EFF(34," Commission Fee "),e.k0s(),e.j41(35,"input",21),e.mxI("ngModelChange",function(r){return e.DH7(t.hpProduct.commissionFee,r)||(t.hpProduct.commissionFee=r),r}),e.k0s()(),e.j41(36,"div",4)(37,"label",22),e.nrm(38,"i",23),e.EFF(39," Product Photo "),e.k0s(),e.j41(40,"div",24)(41,"img",25),e.bIt("error",function(){return t.currentPhotoUrl="https://via.placeholder.com/96?text=No+Image"}),e.k0s()(),e.j41(42,"input",26),e.bIt("change",function(r){return t.onFileChange(r)}),e.k0s(),e.j41(43,"small",27),e.EFF(44,"Leave blank to keep the current photo"),e.k0s()(),e.j41(45,"div",28)(46,"button",29),e.nrm(47,"i",30),e.EFF(48," Save Changes "),e.k0s(),e.j41(49,"button",31),e.bIt("click",function(){return t.onCancel()}),e.nrm(50,"i",32),e.EFF(51," Cancel "),e.k0s()()()()),2&d&&(e.R7$(9),e.R50("ngModel",t.hpProduct.name),e.R7$(5),e.R50("ngModel",t.hpProduct.price),e.R7$(5),e.R50("ngModel",t.hpProduct.productTypeId),e.R7$(3),e.Y8G("ngForOf",t.productTypes),e.R7$(5),e.R50("ngModel",t.hpProduct.dealerRegistrationId),e.R7$(3),e.Y8G("ngForOf",t.dealerRegistrations),e.R7$(5),e.R50("ngModel",t.hpProduct.commissionFee),e.R7$(6),e.Y8G("src",t.currentPhotoUrl,e.B4B))},dependencies:[n.X1,n.qT,n.xH,n.y7,n.me,n.Q0,n.wz,n.BC,n.cb,n.YS,n.YN,n.vS,n.cV,c.MD,c.Sq],encapsulation:2})}}return i})()}}]);