"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[957],{8957:(R,y,m)=>{m.r(y),m.d(y,{CollateralTypeListComponent:()=>B});var t=m(3430),p=m(9159),v=m(2042),T=m(9183),g=m(9417),b=m(5351),h=m(177),e=m(4438);const k=r=>({"border-red-500":r});function C(r,d){1&r&&(e.j41(0,"span",10),e.EFF(1," Name is required "),e.k0s())}let w=(()=>{class r{constructor(i,o,a){this.fb=i,this.dialogRef=o,this.data=a,this.collateralTypeForm=this.fb.group({id:[a.id],name:[a.name,g.k0.required],status:[a.status]})}onSubmit(){this.collateralTypeForm.valid&&this.dialogRef.close(this.collateralTypeForm.value)}onCancel(){this.dialogRef.close()}static{this.\u0275fac=function(o){return new(o||r)(e.rXU(g.ok),e.rXU(b.CP),e.rXU(b.Vh))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-collateral-type-edit"]],decls:15,vars:6,consts:[[1,"p-6"],[1,"text-xl","font-semibold","text-blue-600","mb-4"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","name",1,"block","text-sm","font-medium","text-gray-700"],["id","name","formControlName","name","type","text","placeholder","Enter collateral type name",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","p-2","focus:ring","focus:ring-blue-500","focus:border-blue-500",3,"ngClass"],["class","text-red-500 text-sm",4,"ngIf"],["type","hidden","formControlName","status"],[1,"flex","justify-end","space-x-2"],["type","button",1,"px-4","py-2","bg-gray-200","text-gray-700","rounded-md","hover:bg-gray-300",3,"click"],["type","submit",1,"px-4","py-2","bg-blue-600","text-white","rounded-md","hover:bg-blue-700","disabled:bg-gray-400",3,"disabled"],[1,"text-red-500","text-sm"]],template:function(o,a){if(1&o&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2,"Edit Collateral Type"),e.k0s(),e.j41(3,"form",2),e.bIt("ngSubmit",function(){return a.onSubmit()}),e.j41(4,"div")(5,"label",3),e.EFF(6,"Name"),e.k0s(),e.nrm(7,"input",4),e.DNE(8,C,2,0,"span",5),e.k0s(),e.nrm(9,"input",6),e.j41(10,"div",7)(11,"button",8),e.bIt("click",function(){return a.onCancel()}),e.EFF(12," Cancel "),e.k0s(),e.j41(13,"button",9),e.EFF(14," Save "),e.k0s()()()()),2&o){let n,_;e.R7$(3),e.Y8G("formGroup",a.collateralTypeForm),e.R7$(4),e.Y8G("ngClass",e.eq3(4,k,(null==(n=a.collateralTypeForm.get("name"))?null:n.invalid)&&(null==(n=a.collateralTypeForm.get("name"))?null:n.touched))),e.R7$(),e.Y8G("ngIf",(null==(_=a.collateralTypeForm.get("name"))?null:_.hasError("required"))&&(null==(_=a.collateralTypeForm.get("name"))?null:_.touched)),e.R7$(5),e.Y8G("disabled",a.collateralTypeForm.invalid)}},dependencies:[g.X1,g.qT,g.me,g.BC,g.cb,g.j4,g.JD,h.MD,h.YU,h.bT],encapsulation:2})}}return r})();var x=m(1293);const u=(r,d)=>({"bg-green-500":r,"bg-red-500":d});function S(r,d){1&r&&(e.j41(0,"div",24),e.nrm(1,"mat-spinner",25),e.k0s())}function s(r,d){if(1&r&&(e.j41(0,"div",26),e.EFF(1),e.k0s()),2&r){const i=e.XpG();e.R7$(),e.SpI(" ",i.errorMessage," ")}}function l(r,d){1&r&&(e.j41(0,"th",27),e.EFF(1,"ID"),e.k0s())}function c(r,d){if(1&r&&(e.j41(0,"td",28),e.EFF(1),e.k0s()),2&r){const i=d.$implicit;e.R7$(),e.JRh(i.id)}}function f(r,d){1&r&&(e.j41(0,"th",27),e.EFF(1,"Name"),e.k0s())}function D(r,d){if(1&r&&(e.j41(0,"td",28),e.EFF(1),e.k0s()),2&r){const i=d.$implicit;e.R7$(),e.JRh(i.name)}}function E(r,d){1&r&&(e.j41(0,"th",27),e.EFF(1,"Status"),e.k0s())}function F(r,d){if(1&r&&(e.j41(0,"td",28)(1,"span",29),e.EFF(2),e.k0s()()),2&r){const i=d.$implicit;e.R7$(),e.Y8G("ngClass",e.l_i(2,u,1===i.status,1!==i.status)),e.R7$(),e.SpI(" ",1===i.status?"Active":"Inactive"," ")}}function M(r,d){1&r&&(e.j41(0,"th",30),e.EFF(1,"Actions"),e.k0s())}function j(r,d){if(1&r){const i=e.RV6();e.j41(0,"button",37),e.bIt("click",function(){e.eBV(i);const a=e.XpG().$implicit,n=e.XpG();return e.Njj(n.deleteCollateralType(a.id))}),e.nrm(1,"i",38),e.k0s()}}function $(r,d){if(1&r){const i=e.RV6();e.j41(0,"button",39),e.bIt("click",function(){e.eBV(i);const a=e.XpG().$implicit,n=e.XpG();return e.Njj(n.restoreCollateralType(a.id))}),e.nrm(1,"i",40),e.k0s()}}function I(r,d){if(1&r){const i=e.RV6();e.j41(0,"td",31)(1,"div",32)(2,"button",33),e.bIt("click",function(){const a=e.eBV(i).$implicit,n=e.XpG();return e.Njj(n.editCollateralType(a))}),e.nrm(3,"i",34),e.k0s(),e.DNE(4,j,2,0,"button",35)(5,$,2,0,"button",36),e.k0s()()}if(2&r){const i=d.$implicit;e.R7$(4),e.Y8G("ngIf",1===i.status),e.R7$(),e.Y8G("ngIf",1!==i.status)}}function L(r,d){1&r&&e.nrm(0,"tr",41)}function G(r,d){1&r&&e.nrm(0,"tr",42)}let B=(()=>{class r{constructor(i,o){this.collateralService=i,this.dialog=o,this.displayedColumns=["id","name","status","actions"],this.dataSource=new p.I6,this.loading=!0,this.errorMessage=null,this.showDeleted=!1}ngOnInit(){this.loadCollateralTypes()}loadCollateralTypes(){this.loading=!0,(this.showDeleted?this.collateralService.getAllDeletedCollateralTypes():this.collateralService.getAllActiveCollateralTypes()).subscribe({next:o=>{this.dataSource.data=o,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.loading=!1},error:o=>{this.errorMessage=`Failed to load collateral types: ${o.message}`,this.loading=!1}})}toggleDeletedList(){this.showDeleted=!this.showDeleted,this.loadCollateralTypes()}applyFilter(i){this.dataSource.filter=i.target.value.trim().toLowerCase()}editCollateralType(i){this.dialog.open(w,{width:"500px",data:{...i}}).afterClosed().subscribe(a=>{a&&this.collateralService.updateCollateralType(a.id,a).subscribe({next:n=>{const _=this.dataSource.data.findIndex(A=>A.id===n.id);-1!==_&&(this.dataSource.data[_]=n,this.dataSource.data=[...this.dataSource.data])},error:n=>this.errorMessage=`Update failed: ${n.message}`})})}deleteCollateralType(i){confirm("Are you sure you want to delete this collateral type?")&&this.collateralService.softDeleteCollateralType(i).subscribe({next:()=>this.loadCollateralTypes(),error:o=>this.errorMessage=`Delete failed: ${o.message}`})}restoreCollateralType(i){confirm("Are you sure you want to restore this collateral type?")&&this.collateralService.restoreCollateralType(i).subscribe({next:()=>this.loadCollateralTypes(),error:o=>this.errorMessage=`Restore failed: ${o.message}`})}static{this.\u0275fac=function(o){return new(o||r)(e.rXU(x.B),e.rXU(b.bZ))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-collateral-type-list"]],viewQuery:function(o,a){if(1&o&&(e.GBs(t.iy,5),e.GBs(v.B4,5)),2&o){let n;e.mGM(n=e.lsd())&&(a.paginator=n.first),e.mGM(n=e.lsd())&&(a.sort=n.first)}},decls:30,vars:8,consts:[[1,"container","mx-auto","mt-4"],[1,"shadow-lg","rounded-lg","overflow-hidden","bg-white"],[1,"bg-blue-600","text-white","p-4","flex","justify-between","items-center"],[1,"text-lg","font-semibold"],[1,"space-x-2"],[1,"btn","bg-blue-700","text-white","px-4","py-2","rounded","hover:bg-blue-800",3,"click"],[1,"p-6"],["class","text-center my-4",4,"ngIf"],["class","bg-red-500 text-white p-3 rounded mb-3",4,"ngIf"],[1,"mb-4"],["matInput","","placeholder","Search...",1,"w-full","border","rounded-md","p-2","shadow-sm","focus:ring","focus:ring-blue-300",3,"keyup"],[1,"overflow-x-auto"],["mat-table","","matSort","",1,"w-full","border","border-gray-200",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","","class","border p-2 bg-gray-100 font-semibold",4,"matHeaderCellDef"],["mat-cell","","class","border p-2",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-cell","","class","border p-2 bg-gray-100 font-semibold text-center w-32",4,"matHeaderCellDef"],["mat-cell","","class","border p-2 text-center w-32",4,"matCellDef"],["mat-header-row","","class","bg-gray-100",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"mt-4",3,"pageSize"],[1,"text-center","my-4"],["color","primary"],[1,"bg-red-500","text-white","p-3","rounded","mb-3"],["mat-header-cell","","mat-sort-header","",1,"border","p-2","bg-gray-100","font-semibold"],["mat-cell","",1,"border","p-2"],[1,"inline-block","px-2","py-1","text-xs","font-medium","text-white","rounded-full",3,"ngClass"],["mat-header-cell","",1,"border","p-2","bg-gray-100","font-semibold","text-center","w-32"],["mat-cell","",1,"border","p-2","text-center","w-32"],[1,"flex","justify-center","space-x-2"],["title","Edit",1,"text-blue-600","hover:text-blue-800","p-1",3,"click"],[1,"bi","bi-pencil"],["class","text-red-600 hover:text-red-800 p-1","title","Delete",3,"click",4,"ngIf"],["class","text-green-600 hover:text-green-800 p-1","title","Restore",3,"click",4,"ngIf"],["title","Delete",1,"text-red-600","hover:text-red-800","p-1",3,"click"],[1,"bi","bi-trash"],["title","Restore",1,"text-green-600","hover:text-green-800","p-1",3,"click"],[1,"bi","bi-arrow-counterclockwise"],["mat-header-row","",1,"bg-gray-100"],["mat-row",""]],template:function(o,a){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),e.EFF(4),e.k0s(),e.j41(5,"div",4)(6,"button",5),e.bIt("click",function(){return a.toggleDeletedList()}),e.EFF(7),e.k0s()()(),e.j41(8,"div",6),e.DNE(9,S,2,0,"div",7)(10,s,2,1,"div",8),e.j41(11,"div",9)(12,"input",10),e.bIt("keyup",function(_){return a.applyFilter(_)}),e.k0s()(),e.j41(13,"div",11)(14,"table",12),e.qex(15,13),e.DNE(16,l,2,0,"th",14)(17,c,2,1,"td",15),e.bVm(),e.qex(18,16),e.DNE(19,f,2,0,"th",14)(20,D,2,1,"td",15),e.bVm(),e.qex(21,17),e.DNE(22,E,2,0,"th",14)(23,F,3,5,"td",15),e.bVm(),e.qex(24,18),e.DNE(25,M,2,0,"th",19)(26,I,6,2,"td",20),e.bVm(),e.DNE(27,L,1,0,"tr",21)(28,G,1,0,"tr",22),e.k0s()(),e.nrm(29,"mat-paginator",23),e.k0s()()()),2&o&&(e.R7$(4),e.SpI(" ",a.showDeleted?"Deleted Collateral Type List":"Collateral Type List"," "),e.R7$(3),e.SpI(" ",a.showDeleted?"Show Active":"Show Deleted"," "),e.R7$(2),e.Y8G("ngIf",a.loading),e.R7$(),e.Y8G("ngIf",a.errorMessage),e.R7$(4),e.Y8G("dataSource",a.dataSource),e.R7$(13),e.Y8G("matHeaderRowDef",a.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",a.displayedColumns),e.R7$(),e.Y8G("pageSize",10))},dependencies:[T.Mg,t.iy,p.tP,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB,h.MD,h.YU,h.bT],styles:["table[_ngcontent-%COMP%]{width:100%}"]})}}return r})()},9183:(R,y,m)=>{m.d(y,{D6:()=>x,LG:()=>C,Mg:()=>w});var t=m(4438),p=m(177),v=m(3);const T=["determinateSpinner"];function g(u,S){if(1&u&&(t.qSk(),t.j41(0,"svg",11),t.nrm(1,"circle",12),t.k0s()),2&u){const s=t.XpG();t.BMQ("viewBox",s._viewBox()),t.R7$(),t.xc7("stroke-dasharray",s._strokeCircumference(),"px")("stroke-dashoffset",s._strokeCircumference()/2,"px")("stroke-width",s._circleStrokeWidth(),"%"),t.BMQ("r",s._circleRadius())}}const b=new t.nKC("mat-progress-spinner-default-options",{providedIn:"root",factory:function h(){return{diameter:e}}}),e=100;let C=(()=>{class u{_elementRef=(0,t.WQX)(t.aKT);_noopAnimations;get color(){return this._color||this._defaultColor}set color(s){this._color=s}_color;_defaultColor="primary";_determinateCircle;constructor(){const s=(0,t.WQX)(t.bc$,{optional:!0}),l=(0,t.WQX)(b);this._noopAnimations="NoopAnimations"===s&&!!l&&!l._forceAnimations,this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",l&&(l.color&&(this.color=this._defaultColor=l.color),l.diameter&&(this.diameter=l.diameter),l.strokeWidth&&(this.strokeWidth=l.strokeWidth))}mode;get value(){return"determinate"===this.mode?this._value:0}set value(s){this._value=Math.max(0,Math.min(100,s||0))}_value=0;get diameter(){return this._diameter}set diameter(s){this._diameter=s||0}_diameter=e;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(s){this._strokeWidth=s||0}_strokeWidth;_circleRadius(){return(this.diameter-10)/2}_viewBox(){const s=2*this._circleRadius()+this.strokeWidth;return`0 0 ${s} ${s}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(l){return new(l||u)};static \u0275cmp=t.VBU({type:u,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(l,c){if(1&l&&t.GBs(T,5),2&l){let f;t.mGM(f=t.lsd())&&(c._determinateCircle=f.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(l,c){2&l&&(t.BMQ("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===c.mode?c.value:null)("mode",c.mode),t.HbH("mat-"+c.color),t.xc7("width",c.diameter,"px")("height",c.diameter,"px")("--mdc-circular-progress-size",c.diameter+"px")("--mdc-circular-progress-active-indicator-width",c.diameter+"px"),t.AVh("_mat-animation-noopable",c._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===c.mode))},inputs:{color:"color",mode:"mode",value:[2,"value","value",t.Udg],diameter:[2,"diameter","diameter",t.Udg],strokeWidth:[2,"strokeWidth","strokeWidth",t.Udg]},exportAs:["matProgressSpinner"],features:[t.GFd],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(l,c){if(1&l&&(t.DNE(0,g,2,8,"ng-template",null,0,t.C5r),t.j41(2,"div",2,1),t.qSk(),t.j41(4,"svg",3),t.nrm(5,"circle",4),t.k0s()(),t.joV(),t.j41(6,"div",5)(7,"div",6)(8,"div",7),t.eu8(9,8),t.k0s(),t.j41(10,"div",9),t.eu8(11,8),t.k0s(),t.j41(12,"div",10),t.eu8(13,8),t.k0s()()()),2&l){const f=t.sdS(1);t.R7$(4),t.BMQ("viewBox",c._viewBox()),t.R7$(),t.xc7("stroke-dasharray",c._strokeCircumference(),"px")("stroke-dashoffset",c._strokeDashOffset(),"px")("stroke-width",c._circleStrokeWidth(),"%"),t.BMQ("r",c._circleRadius()),t.R7$(4),t.Y8G("ngTemplateOutlet",f),t.R7$(2),t.Y8G("ngTemplateOutlet",f),t.R7$(2),t.Y8G("ngTemplateOutlet",f)}},dependencies:[p.T3],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}return u})();const w=C;let x=(()=>{class u{static \u0275fac=function(l){return new(l||u)};static \u0275mod=t.$C({type:u});static \u0275inj=t.G2t({imports:[v.yE]})}return u})()}}]);