<div class="container-fluid py-4 animate__animated animate__fadeIn">
  <div class="row justify-content-center">
    <div class="col-lg-8 col-xl-6">
      <div class="card border-0 shadow-lg animate__animated animate__zoomIn">
        <!-- Card Header -->
        <div class="card-header bg-primary bg-gradient text-white py-3">
          <div class="d-flex justify-content-between align-items-center">
            <h2 class="m-0">
              <i class="bi bi-building me-2"></i> Dealer Registration
            </h2>
            <button type="button" class="btn btn-light btn-sm" routerLink="/dealers">
              <i class="bi bi-arrow-left me-1"></i> Back to List
            </button>
          </div>
        </div>

        <!-- Card Body -->
        <div class="card-body p-4 p-md-5">
          <form [formGroup]="dealerForm" (ngSubmit)="onSubmit()" class="needs-validation" novalidate>
            <div class="row g-4">
              <!-- Company Name -->
              <div class="col-md-12">
                <label class="form-label fw-bold">
                  <i class="bi bi-building text-primary me-1"></i> Company Name <span class="text-danger">*</span>
                </label>
                <div class="input-group has-validation">
                  <span class="input-group-text bg-light"><i class="bi bi-card-text"></i></span>
                  <input
                    id="companyName"
                    formControlName="companyName"
                    placeholder="Enter company name"
                    class="form-control"
                    [ngClass]="{
                      'is-invalid': dealerForm.get('companyName')?.touched && dealerForm.get('companyName')?.invalid,
                      'is-valid': dealerForm.get('companyName')?.touched && dealerForm.get('companyName')?.valid
                    }"
                  >
                  <div *ngIf="dealerForm.get('companyName')?.touched && dealerForm.get('companyName')?.invalid"
                       class="invalid-feedback animate__animated animate__fadeIn">
                    <i class="bi bi-exclamation-circle me-1"></i> Company Name is required
                  </div>
                </div>
              </div>

              <!-- Phone Number -->
              <div class="col-md-6">
                <label class="form-label fw-bold">
                  <i class="bi bi-telephone text-primary me-1"></i> Phone Number <span class="text-danger">*</span>
                </label>
                <div class="input-group has-validation">
                  <span class="input-group-text bg-light"><i class="bi bi-phone"></i></span>
                  <input
                    id="phoneNumber"
                    formControlName="phoneNumber"
                    placeholder="09123456789"
                    class="form-control"
                    [ngClass]="{
                      'is-invalid': dealerForm.get('phoneNumber')?.touched && dealerForm.get('phoneNumber')?.invalid,
                      'is-valid': dealerForm.get('phoneNumber')?.touched && dealerForm.get('phoneNumber')?.valid
                    }"
                  >
                  <div *ngIf="dealerForm.get('phoneNumber')?.touched && dealerForm.get('phoneNumber')?.invalid"
                       class="invalid-feedback animate__animated animate__fadeIn">
                    <i class="bi bi-exclamation-circle me-1"></i> Valid phone number required (10-15 digits)
                  </div>
                </div>
              </div>

              <!-- Status -->
              <div class="col-md-6">
                <label class="form-label fw-bold">
                  <i class="bi bi-toggle-on text-primary me-1"></i> Status <span class="text-danger">*</span>
                </label>
                <select
                  id="status"
                  formControlName="status"
                  class="form-select"
                  [ngClass]="{
                    'is-invalid': dealerForm.get('status')?.touched && dealerForm.get('status')?.invalid,
                    'is-valid': dealerForm.get('status')?.touched && dealerForm.get('status')?.valid
                  }"
                >
                  <option value="" disabled selected>Select Status</option>
                  <option value="1">Active</option>
                  <option value="0">Inactive</option>
                </select>
                <div *ngIf="dealerForm.get('status')?.touched && dealerForm.get('status')?.invalid"
                     class="invalid-feedback animate__animated animate__fadeIn">
                  <i class="bi bi-exclamation-circle me-1"></i> Status is required
                </div>
              </div>

              <!-- Address Section -->
              <div class="col-12">
                <div class="border-top pt-3 mb-3">
                  <h5 class="fw-bold text-primary">
                    <i class="bi bi-geo-alt me-2"></i> Address Information
                  </h5>
                </div>
              </div>

              <!-- Address Fields -->
              <div formGroupName="address" class="row g-4">
                <!-- Street -->
                <div class="col-12">
                  <label class="form-label fw-bold">
                    <i class="bi bi-signpost text-primary me-1"></i> Street Address <span class="text-danger">*</span>
                  </label>
                  <div class="input-group has-validation">
                    <span class="input-group-text bg-light"><i class="bi bi-house-door"></i></span>
                    <input
                      id="street"
                      formControlName="street"
                      placeholder="123 Main Street"
                      class="form-control"
                      [ngClass]="{
                        'is-invalid': dealerForm.get('address.street')?.touched && dealerForm.get('address.street')?.invalid,
                        'is-valid': dealerForm.get('address.street')?.touched && dealerForm.get('address.street')?.valid
                      }"
                    >
                    <div *ngIf="dealerForm.get('address.street')?.touched && dealerForm.get('address.street')?.invalid"
                         class="invalid-feedback animate__animated animate__fadeIn">
                      <i class="bi bi-exclamation-circle me-1"></i> Street address is required
                    </div>
                  </div>
                </div>

                <!-- Region -->
                <div class="col-md-4">
                  <label class="form-label fw-bold">
                    <i class="bi bi-globe text-primary me-1"></i> Region <span class="text-danger">*</span>
                  </label>
                  <select
                    id="region"
                    formControlName="region"
                    (change)="onRegionChange()"
                    class="form-select"
                    [ngClass]="{
                      'is-invalid': dealerForm.get('address.region')?.touched && dealerForm.get('address.region')?.invalid,
                      'is-valid': dealerForm.get('address.region')?.touched && dealerForm.get('address.region')?.valid
                    }"
                  >
                    <option value="" disabled selected>Select Region</option>
                    <option *ngFor="let region of regions" [value]="region">{{ region }}</option>
                  </select>
                  <div *ngIf="dealerForm.get('address.region')?.touched && dealerForm.get('address.region')?.invalid"
                       class="invalid-feedback animate__animated animate__fadeIn">
                    <i class="bi bi-exclamation-circle me-1"></i> Region is required
                  </div>
                </div>

                <!-- District -->
                <div class="col-md-4">
                  <label class="form-label fw-bold">
                    <i class="bi bi-map text-primary me-1"></i> District <span class="text-danger">*</span>
                  </label>
                  <select
                    id="district"
                    formControlName="district"
                    (change)="onDistrictChange()"
                    class="form-select"
                    [disabled]="!districts.length"
                    [ngClass]="{
                      'is-invalid': dealerForm.get('address.district')?.touched && dealerForm.get('address.district')?.invalid,
                      'is-valid': dealerForm.get('address.district')?.touched && dealerForm.get('address.district')?.valid
                    }"
                  >
                    <option value="" disabled selected>Select District</option>
                    <option *ngFor="let district of districts" [value]="district">{{ district }}</option>
                  </select>
                  <div *ngIf="dealerForm.get('address.district')?.touched && dealerForm.get('address.district')?.invalid"
                       class="invalid-feedback animate__animated animate__fadeIn">
                    <i class="bi bi-exclamation-circle me-1"></i> District is required
                  </div>
                </div>

                <!-- Township -->
                <div class="col-md-4">
                  <label class="form-label fw-bold">
                    <i class="bi bi-geo text-primary me-1"></i> Township <span class="text-danger">*</span>
                  </label>
                  <select
                    id="township"
                    formControlName="township"
                    class="form-select"
                    [disabled]="!townships.length"
                    [ngClass]="{
                      'is-invalid': dealerForm.get('address.township')?.touched && dealerForm.get('address.township')?.invalid,
                      'is-valid': dealerForm.get('address.township')?.touched && dealerForm.get('address.township')?.valid
                    }"
                  >
                    <option value="" disabled selected>Select Township</option>
                    <option *ngFor="let township of townships" [value]="township">{{ township }}</option>
                  </select>
                  <div *ngIf="dealerForm.get('address.township')?.touched && dealerForm.get('address.township')?.invalid"
                       class="invalid-feedback animate__animated animate__fadeIn">
                    <i class="bi bi-exclamation-circle me-1"></i> Township is required
                  </div>
                </div>
              </div>

              <!-- Current Account -->
              <div class="col-12">
                <label class="form-label fw-bold">
                  <i class="bi bi-bank text-primary me-1"></i> Current Account <span class="text-danger">*</span>
                </label>
                <select
                  id="currentAccountId"
                  formControlName="currentAccountId"
                  class="form-select"
                  [ngClass]="{
                    'is-invalid': dealerForm.get('currentAccountId')?.touched && dealerForm.get('currentAccountId')?.invalid,
                    'is-valid': dealerForm.get('currentAccountId')?.touched && dealerForm.get('currentAccountId')?.valid
                  }"
                >
                  <option value="" disabled selected>Select Current Account</option>
                  <option *ngFor="let account of currentAccounts" [value]="account.id">
                    {{ account.accountNumber }} ({{ account.balance | currency }})
                  </option>
                </select>
                <div *ngIf="dealerForm.get('currentAccountId')?.touched && dealerForm.get('currentAccountId')?.invalid"
                     class="invalid-feedback animate__animated animate__fadeIn">
                  <i class="bi bi-exclamation-circle me-1"></i> Current Account is required
                </div>
              </div>

              <!-- Submit Button -->
              <div class="col-12 mt-4">
                <div class="d-grid">
                  <button type="submit" class="btn btn-primary btn-lg py-3 animate__animated animate__pulse animate__infinite animate__slower"
                          [disabled]="!dealerForm.valid">
                    <i class="bi bi-check-circle-fill me-2"></i> Register Dealer
                  </button>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>