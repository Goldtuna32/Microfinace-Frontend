<div class="container-fluid animate__animated animate__fadeIn">
    <div class="row justify-content-center">
      <div class="col-xl-6 col-lg-8 col-md-10">
        <!-- Main Card -->
        <div class="card shadow-lg border-0 rounded-lg overflow-hidden mt-4">
          <!-- Card Header with Gradient Background -->
          <div class="card-header bg-gradient-primary-to-secondary text-white py-4">
            <div class="text-center">
              <h2 class="h3 mb-0">
                <i class="bi bi-pencil-square me-2"></i>Edit HP Product
              </h2>
              <p class="mb-0 small opacity-75 mt-1">
                <i class="bi bi-info-circle me-1"></i>Update the product details below
              </p>
            </div>
          </div>
  
          <!-- Card Body -->
          <div class="card-body p-5">
            <form (ngSubmit)="onSubmit()" class="needs-validation" novalidate>
              <!-- Product Name -->
              <div class="mb-4">
                <label for="name" class="form-label fw-bold text-gray-700 mb-2">
                  <i class="bi bi-tag me-1 text-primary"></i>Product Name
                </label>
                <div class="input-group has-validation">
                  <span class="input-group-text bg-light">
                    <i class="bi bi-card-heading text-muted"></i>
                  </span>
                  <input id="name" [(ngModel)]="hpProduct.name" name="name" 
                         class="form-control" required
                         placeholder="Enter product name">
                  <div class="invalid-feedback">
                    Please provide a product name.
                  </div>
                </div>
              </div>
  
              <!-- Price and Commission Fee Row -->
              <div class="row">
                <!-- Price -->
                <div class="col-md-6 mb-4">
                  <label for="price" class="form-label fw-bold text-gray-700 mb-2">
                    <i class="bi bi-currency-dollar me-1 text-primary"></i>Price
                  </label>
                  <div class="input-group has-validation">
                    <span class="input-group-text bg-light">$</span>
                    <input id="price" type="number" [(ngModel)]="hpProduct.price" name="price" 
                           class="form-control" required
                           placeholder="0.00" step="0.01" min="0">
                    <div class="invalid-feedback">
                      Please provide a valid price.
                    </div>
                  </div>
                </div>
  
                <!-- Commission Fee -->
                <div class="col-md-6 mb-4">
                  <label for="commissionFee" class="form-label fw-bold text-gray-700 mb-2">
                    <i class="bi bi-percent me-1 text-primary"></i>Commission Fee
                  </label>
                  <div class="input-group has-validation">
                    <input id="commissionFee" type="number" [(ngModel)]="hpProduct.commissionFee" name="commissionFee" 
                           class="form-control" required
                           placeholder="0" min="0" max="100">
                    <span class="input-group-text bg-light">%</span>
                    <div class="invalid-feedback">
                      Please provide a valid commission (0-100%).
                    </div>
                  </div>
                </div>
              </div>
  
              <!-- Product Type and Dealer Row -->
              <div class="row">
                <!-- Product Type -->
                <div class="col-md-6 mb-4">
                  <label for="productTypeId" class="form-label fw-bold text-gray-700 mb-2">
                    <i class="bi bi-list-ul me-1 text-primary"></i>Product Type
                  </label>
                  <select id="productTypeId" [(ngModel)]="hpProduct.productTypeId" name="productTypeId" 
                          class="form-select" required>
                    <option value="" disabled>Select product type</option>
                    <option *ngFor="let type of productTypes" [value]="type.id">
                      {{ type.name }}
                    </option>
                  </select>
                  <div class="invalid-feedback">
                    Please select a product type.
                  </div>
                </div>
  
                <!-- Dealer Registration -->
                <div class="col-md-6 mb-4">
                  <label for="dealerRegistrationId" class="form-label fw-bold text-gray-700 mb-2">
                    <i class="bi bi-building me-1 text-primary"></i>Dealer
                  </label>
                  <select id="dealerRegistrationId" [(ngModel)]="hpProduct.dealerRegistrationId" name="dealerRegistrationId" 
                          class="form-select" required>
                    <option value="" disabled>Select dealer</option>
                    <option *ngFor="let dealer of dealerRegistrations" [value]="dealer.id">
                      {{ dealer.companyName }}
                    </option>
                  </select>
                  <div class="invalid-feedback">
                    Please select a dealer.
                  </div>
                </div>
              </div>
  
              <!-- Product Photo -->
              <div class="mb-4">
                <label class="form-label fw-bold text-gray-700 mb-2">
                  <i class="bi bi-image me-1 text-primary"></i>Product Photo
                </label>
                
                <!-- Current Photo -->
                <div class="current-photo mb-3">
                  <div class="d-flex align-items-center gap-3">
                    <div class="photo-preview position-relative">
                      <img [src]="currentPhotoUrl" 
                           alt="Current product photo" 
                           class="img-thumbnail"
                           (error)="currentPhotoUrl = 'https://via.placeholder.com/300?text=No+Image'">
                      <span class="badge bg-info position-absolute top-0 start-0 m-1">Current</span>
                    </div>
                    <div class="text-muted small">
                      <i class="bi bi-info-circle me-1"></i>Leave blank to keep current photo
                    </div>
                  </div>
                </div>
                
                <!-- New Photo Upload -->
                <div class="file-upload-container">
                  <input id="photo" type="file" (change)="onFileChange($event)" 
                         class="form-control visually-hidden" accept="image/*">
                  <label for="photo" class="file-upload-label">
                    <div class="file-upload-content" *ngIf="!selectedFile; else filePreview">
                      <i class="bi bi-cloud-arrow-up fs-1 text-muted"></i>
                      <p class="mb-0 mt-2">Click to upload new photo</p>
                      <small class="text-muted">JPEG, PNG (Max 5MB)</small>
                    </div>
                    <ng-template #filePreview>
                      <div class="file-preview">
                        <img [src]="previewUrl" alt="Preview" class="img-thumbnail">
                        <button type="button" class="btn btn-sm btn-danger mt-2" (click)="clearFile()">
                          <i class="bi bi-trash"></i> Remove
                        </button>
                      </div>
                    </ng-template>
                  </label>
                </div>
              </div>
  
              <!-- Form Actions -->
              <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
                <button type="button" class="btn btn-outline-secondary me-md-2" (click)="onCancel()">
                  <i class="bi bi-x-circle me-1"></i> Cancel
                </button>
                <button type="submit" class="btn btn-primary">
                  <i class="bi bi-save me-1"></i> Save Changes
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>